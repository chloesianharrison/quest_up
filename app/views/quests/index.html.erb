
<div class="container text-center mt-3 mb-3 margin-bottom div-relative" data-controller="checkboxes" data-action="click->checkboxes#closeModal" data-checkboxes-token-value="<%= form_authenticity_token %>">
<div id="modal-backdrop" data-checkboxes-target="modalDiv">

<h1 class="mb-3">Quests</h1>
 <div class="dropdown filter">
    <button class="btn dropdown-toggle material-symbols-outlined filter-icon" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
      Sort
    </button>
    <div class="dropdown-menu p-4 filter-menu mt-3" aria-labelledby="dropdownMenuButton">
      <form method="get" action="/quests">
        <div class="form-check">
          <input class="form-check-input" type="radio" id="completed" name="sortOption" value="completed" data-filter-target="completed">
          <label class="form-check-label" for="completed">Completed</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" id="easyQuest" name="sortOption" value="easyQuest" data-filter-target="xp">
          <label class="form-check-label" for="easyQuest">Easy Quests</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" id="middleQuest" name="sortOption" value="middleQuest" data-filter-target="xp">
          <label class="form-check-label" for="middleQuest">Mid Quests</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" id="hardQuest" name="sortOption" value="hardQuest" data-filter-target="xp">
          <label class="form-check-label" for="hardQuest">Hard Quests</label>
        </div>
        <div class="form-group mt-2">
          <label for="byDueDate">Due date :</label>
          <input type="date" class="form-control" id="byDueDate" name="sortOption">
        </div>
        <div class="form-group mt-3">
          <a href="/quests" class="link filter-link">Clear</a>
          <input type="submit" class="btn filter-btn" value="Submit">
        </div>
      </form>
    </div>
  </div>
<%# give form method of get to stay on same page and keep result %>
  <% @quests.each do |quest| %>
    <details class="card card-list-outside-quest">
      <summary class="d-flex justify-content-between">
        <div class="card card-list-inside text-start" data-checkboxes-target="bg">
          <p class="card-title"><%= quest.name %></p>
        </div>
        <div>
          <div class="custom-checkbox tick <%= quest.completed ? 'checked' : ''%>" data-id="<%= quest.id %>" data-action="click->checkboxes#completeQuest">
            <i class="fa-solid fa-check"></i>
          </div>
      </summary>
      <div class="card card-list-info">
        <p class="card-details text-start">
          <%= quest.notes %>
        </p>
          <br>
          <div class="d-flex">
            <p class="xp-reward flex-grow-1 text-start"><%= quest.xp %>XP</p>
            <%= link_to "edit", edit_quest_path(quest), class:"btn btn-quest btn-card" %>
            <%= link_to "delete", quest_path(quest), class:"btn btn-quest btn-card", data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} %>
          </div>
      </div>
    </details>
  <% end %>
</div>
  <div class="modal fade" tabindex="-1" data-checkboxes-target="modal" >
    <div class="modal-dialog modal-dialog-centered ">
      <div class="modal-content pt-3 pb-3 bg-warning">
        <h1>Congratulations!</h1>
        <h1>You did it!</h1>
        <p data-checkboxes-target="amount">You earned 10XP!</p>
      </div>
    </div>
  </div>

</div>
